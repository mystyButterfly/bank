"use strict";(self.webpackChunkbank_in_webpack=self.webpackChunkbank_in_webpack||[]).push([[332],{416:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(848),a=t(540);const i=function(e){var n=e.banksList,t=e.setUpSelectedOption,i=(0,a.useState)([]),c=i[0],s=i[1],o=(0,a.useState)(null),l=o[0],d=o[1],u=(0,a.useState)(!1),h=u[0],m=u[1];return(0,a.useEffect)((function(){n.length>0&&(s(n),d(n[0]),t(n[0].cardID))}),[n]),(0,r.jsxs)("div",{className:"dropdown",onClick:function(){var e=setTimeout((function(){return m(!1)}),5e3);return m(!h),function(){clearTimeout(e)}},children:[(0,r.jsxs)("div",{className:"dropdown-header",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"#77a3f4",className:"dropdown-icon",viewBox:"0 0 16 16",children:(0,r.jsx)("path",{d:"M0 3a2 2 0 0 1 2-2h13.5a.5.5 0 0 1 0 1H15v2a1 1 0 0 1 1 1v8.5a1.5 1.5 0 0 1-1.5 1.5h-12A2.5 2.5 0 0 1 0 12.5zm1 1.732V12.5A1.5 1.5 0 0 0 2.5 14h12a.5.5 0 0 0 .5-.5V5H2a2 2 0 0 1-1-.268M1 3a1 1 0 0 0 1 1h12V2H2a1 1 0 0 0-1 1"})}),(0,r.jsx)("span",{className:"dropdown-selected",children:null==l?void 0:l.bankName}),h?(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-x",viewBox:"0 0 16 16",children:(0,r.jsx)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"})}):(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"grey",className:"bi bi-chevron-compact-down",viewBox:"0 0 16 16",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M1.553 6.776a.5.5 0 0 1 .67-.223L8 9.44l5.776-2.888a.5.5 0 1 1 .448.894l-6 3a.5.5 0 0 1-.448 0l-6-3a.5.5 0 0 1-.223-.67"})})]}),h&&(0,r.jsx)("div",{className:"dropdown-list",children:c.map((function(e,n){return(0,r.jsx)("div",{className:"dropdown-option",onClick:function(){return function(e){d(e),t(e.cardID),m(!1)}(e)},children:e.bankName},n)}))})]})}},332:(e,n,t)=>{t.r(n),t.d(n,{default:()=>o});var r=t(848),a=t(416),i=t(540),c=t(414),s=function(){return s=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},s.apply(this,arguments)};const o=function(){var e=(0,i.useContext)(c.R);if(null===e)throw new Error("UserContext must be used within a UserContextProvider");var n=e.contextBanksList,t=(0,i.useState)(),o=t[0],l=t[1],d=(0,i.useState)(),u=d[0],h=d[1],m=(0,i.useState)({recipientBankID:"",currentBankID:"",comment:"",amount:"",recipientEmail:"",date:"".concat((new Date).toLocaleString())}),f=m[0],p=m[1],v=(0,i.useState)({success:"",error:""}),x=v[0],j=v[1],k=/^(?=.*[0-9])([0-9]*([.,][0-9]*)?|[0-9]+)$/;(0,i.useEffect)((function(){var e=setTimeout((function(){j({success:"",error:""})}),6e3);return function(){clearTimeout(e)}}),[x]),(0,i.useEffect)((function(){u&&p((function(e){return s(s({},e),{recipientBankID:u})}))}),[u]);var w=function(e){var n=e.target,t=n.name,r=n.value;p((function(e){var n;return s(s({},e),((n={})[t]=r,n))}))};return(0,i.useEffect)((function(){if(o){var e=s(s({},f),{currentBankID:o});p(e)}}),[o]),(0,r.jsxs)("div",{className:"transfer",children:[x.success&&(0,r.jsx)("div",{className:"transfer-message t-green",children:x.success}),x.error&&(0,r.jsx)("div",{className:"transfer-message t-red",children:x.error}),(0,r.jsx)("h1",{children:"Payment Transfer"}),(0,r.jsx)("p",{children:"Please provide any specific details or notes related to the payment transfer."}),(0,r.jsx)("br",{}),(0,r.jsx)("h3",{children:"Transfer details"}),(0,r.jsx)("p",{children:"Enter the details of the recipient"}),(0,r.jsx)("br",{}),(0,r.jsxs)("div",{className:"transfer-container",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Select Source Bank"}),(0,r.jsx)("p",{children:"Select the bank account you want to transfer from."})]}),(0,r.jsxs)("div",{className:"transfer-dropdown",children:[(0,r.jsx)("span",{children:(0,r.jsx)(a.A,{banksList:n,setUpSelectedOption:l})}),(0,r.jsx)("span",{children:o})]})]}),(0,r.jsxs)("div",{className:"transfer-container",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Transfer Note (Optional)"}),(0,r.jsx)("p",{children:"Please provide any additional information or instructions related to the transfer"})]}),(0,r.jsx)("input",{type:"text",name:"comment",placeholder:"Enter the additional information",onChange:w,value:f.comment})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{children:"Bank account details"}),(0,r.jsx)("p",{children:"The bank account details of the recipient"})]}),(0,r.jsxs)("div",{className:"transfer-container",children:[(0,r.jsx)("div",{children:"Recipient's Email Address (Optional)"}),(0,r.jsx)("input",{type:"text",name:"recipientEmail",placeholder:"Enter the Recipient's Email Address",onChange:w,value:f.recipientEmail})]}),(0,r.jsxs)("div",{className:"transfer-container",children:[(0,r.jsx)("div",{children:"Recipient's Bank Account Number"}),(0,r.jsxs)("div",{className:"transfer-c-mybanks",children:[(0,r.jsx)("p",{children:"My banks:"})," ",(0,r.jsx)("div",{className:"transfer-dropdown-mycard",onClick:function(){return function(){if(f.recipientBankID.length<19){var e=s(s({},f),{recipientBankID:n[0].cardID});p(e)}}()},children:(0,r.jsx)(a.A,{banksList:n,setUpSelectedOption:h})})]}),(0,r.jsx)("input",{type:"text",name:"recipientBankID",placeholder:"ex. 1234 1234 1234 1234 (with space)",onChange:w,value:f.recipientBankID})]}),(0,r.jsxs)("div",{className:"transfer-container",children:[(0,r.jsx)("div",{children:"Amount"}),(0,r.jsx)("input",{type:"text",name:"amount",placeholder:"for example, 150",onChange:w,value:f.amount})]}),(0,r.jsx)("div",{className:"transfer-btn-container",children:(0,r.jsx)("button",{className:"transfer-btn ".concat(!k.test(f.amount)&&"disable"),onClick:function(){!function(){try{var e=localStorage.getItem("cards");if(!e)return console.error("No cards found in localStorage."),void j((function(e){return s(s({},e),{error:"Recipient card not found."})}));for(var n=JSON.parse(e),t=void 0,r=void 0,a=0;a<n.length;a++)n[a].cardID===f.currentBankID&&(t=n[a]),n[a].cardID===f.recipientBankID&&(r=n[a]);if(!t)return console.error("Sender card not found."),void j((function(e){return s(s({},e),{error:"Recipient card not found."})}));if(!r)return console.error("Recipient card not found."),void j((function(e){return s(s({},e),{error:"Recipient card not found."})}));if(!(t.balance>=Number(f.amount)))return console.error("Insufficient balance."),void j((function(e){return s(s({},e),{error:"Insufficient balance."})}));t.balance-=Number(f.amount),t.history.push({transactionId:1e7*Math.random(),amount:f.amount,type:"minus",comment:"".concat(f.comment," from ").concat(f.currentBankID," to ").concat(f.recipientBankID," recipient email ").concat(f.recipientEmail),date:f.date}),r.balance+=Number(f.amount),r.history.push({transactionId:1e7*Math.random(),amount:f.amount,type:"add",comment:"".concat(f.comment," from ").concat(f.currentBankID," to ").concat(f.recipientBankID," recipient email ").concat(f.recipientEmail),date:f.date}),p({recipientBankID:"",currentBankID:o||"",comment:"",amount:"",recipientEmail:"",date:"".concat((new Date).toLocaleString())}),j((function(e){return s(s({},e),{success:"Transaction is success"})})),localStorage.setItem("cards",JSON.stringify(n))}catch(e){console.log(e),j((function(n){return s(s({},n),{error:String(e)})}))}}()},disabled:!k.test(f.amount),children:"Transfer"})})]})}}}]);